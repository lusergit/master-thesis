\subsection{Definition}
\label{sub:intervals}

We define \emph{interval analysis} of the above language \(\imp\) in a
standard way, taking the best correct approximations (bca) for the
basic expressions in \(\expr\).

\begin{definition}[Integer intervals]
  We call
  \begin{equation*}
    \Int \defin \{ \interval{a}{b} \mid a \in \z \cup \{-\infty\}
    \wedge b \in \z \cup \{+\infty\} \wedge a\leq b \} \cup
    \{\bot\} 
  \end{equation*}
  the set of integer intervals. In the rest of the thesis we will
  write \(\top\) instead of \(\interval{-\infty}{+\infty}\)
\end{definition}

In order to later do the variable-wise lifting of the intervals domain
and relate it to the concrete environment \(\dom\) we need to define
concretization and abastraction maps for the intervals domain

\begin{definition}
  We define the \emph{concretization map} \(\concr[\Int] : \Int \to
  \poset{\n}\) as
  \begin{align*}
    \concr[\Int](\interval{a}{b}) & \defin \{x\in \n \mid a \leq x \leq b\} \\
    \concr[\Int](\bot) & \defin \emptyset
  \end{align*}

  And the \emph{abstraction map} \(\abstr[\Int]:\poset{\z} \to \Int\) as
  \begin{align*}
    \abstr[\Int](\emptyset) & \defin \bot \\
    \abstr[\Int](X) & \defin
    \begin{cases}
      \bot & \text{if } X = \emptyset \\
      \interval{\min(X)}{\max(X)} & \text{otherwise}
    \end{cases}
  \end{align*}
\end{definition}

The next step is to define some order on \(\Int\). For this purpouse
we define a partial order \(\sqsubseteq\) based on the concretization
map.

\begin{definition}
  \(\sqsubseteq : \Int \times \Int\) is a reflexive, antisymmetric and
  transitive relation, i.e., for all \(I,J,K \in \Int\)
  \begin{align*}
    I \sqsubseteq I  & \quad \text{(reflexivity)} \\
    I \sqsubseteq J \wedge J \sqsubseteq I \Rightarrow I = J & \quad \text{(antisimmetry)} \\
    I \sqsubseteq J \wedge J \sqsubseteq K \Rightarrow I \sqsubseteq K & \quad \text{(transitivity)}
  \end{align*}

  where for all \(I,J \in \Int\)

  \begin{equation*}
    I \sqsubseteq J \iff \concr(I) \subseteq \concr(J)
  \end{equation*}
\end{definition}

We also define least upper bound and greatest lower bound on the
\(\Int\) domain:

\begin{definition}
  \todo[inline]{intro alla def}
    \begin{align*}
      \interval{a}{b} \; \acup \; \interval{c}{d} & \defin \interval{\min(a,c)}{\max(b,d)} \\
      \interval{a}{b} \; \acap \; \interval{c}{d} & \defin
                                                    \begin{cases} \
                                                      \interval{\max(a,c)}{\min(b,d)} & \text{if } \min < \max \\
                                                      \abstract{\bot} & \text{otherwise}
                                                    \end{cases}
  \end{align*}
\end{definition}

\noindent
Observe that because of \(\sqsubseteq\) and \(\acup\) definitions
\(\tuple{\Int,\sqsubseteq}\) is a complete lattice.  The next building
block is the definition of some more operations on intervals, namely
the addition and subtraction of an integer constant:

\begin{definition}[Interval addition and subtraction]
  \label{de:add}
  For a nonempty interval \(\interval{a}{b} \in \Int\) and
  \(c \in \n\) define
  \(\interval{a}{b} \pm c \veq \interval{a\pm c}{b\pm c}\) (recall
  that \(\pm \infty + c = \pm\infty - c = \pm\infty\)).
\end{definition}
